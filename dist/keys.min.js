(function(){"use strict";angular.module("module.tac.keys",[]).service("tac.keys",[function(){var a,b,c,d,e,f,g,h,i,j,k,l;return h=[],i=[],g=[{key:"enter",code:13,stop:!0},{key:"left",code:37},{key:"up",code:38},{key:"right",code:39},{key:"down",code:40},{key:"info",code:457},{key:"red",code:403},{key:"green",code:404},{key:"yellow",code:405},{key:"blue",code:406},{key:"play",code:415},{key:"pause",code:19},{key:"rewind",code:412},{key:"fast_fwd",code:417},{key:"page_up",code:33},{key:"page_down",code:34},{key:"previous",code:422},{key:"next",code:423},{key:"go_back",code:166},{key:"subtitle",code:460},{key:"audio",code:176},{key:"favorites",code:372},{key:"help",code:47},{key:"menu",code:18},{key:"anterior",code:413}],b=[{key:"menu",code:77},{key:"anterior",code:65},{key:"go_back",code:86},{key:"fast_fwd",code:75},{key:"rewind",code:74},{key:"pause",code:80},{key:"play",code:32},{key:"info",code:73},{key:"red",code:82},{key:"green",code:71},{key:"yellow",code:89},{key:"blue",code:66}],l=function(a){return{is_number:!0,key:"number",number:a}},d=function(a){return a>=48&&57>=a?l(a-48):a>=96&&105>=a?l(a-96):void 0},e=function(a){var b,c,e;for(c=0,e=g.length;e>c;c++)if(b=g[c],b.code===a)return b;return d(a)},c=function(a){var c,d,e;for(d=0,e=b.length;e>d;d++)if(c=b[d],c.code===a)return c},k=function(a){return{onkeydown:function(b){var c,d,f,g;if(17===b.keyCode)return a.current=a.ctrl;if(c=e(b.keyCode),!c)return console.log("unregistered key "+b.keyCode);for(f=0,g=h.length;g>f;f++)d=h[f],d.handle(c);return c.stop?b.preventDefault():void 0},onkeyup:function(a){}}},j=function(a){return{onkeydown:function(a){var b,d,e,f;if(b=c(a.keyCode)){for(e=0,f=h.length;f>e;e++)d=h[e],d.handle(b);return a.preventDefault()}return console.log("unregistered key "+a.keyCode)},onkeyup:function(b){return 17===b.keyCode?a.current=a.normal:void 0}}},f={},f.normal=k(f),f.ctrl=j(f),f.current=f.normal,a=function(){function a(){}return a.subscribe=function(a){return h.push(a),function(){return unsubscribe(a)}},a.unsubscribe=function(a){return _.remove(h,a)},a.create_level=function(){return i.push(h),h=[]},a.previous_level=function(){return i.length>0?h=i.pop():console.error("trying to pop unique listener array from listeners_stack")},a.bind_keydown=function(a){return a.onkeydown=function(a){return f.current.onkeydown(a)},a.onkeyup=function(a){return f.current.onkeyup(a)}},a}()}])}).call(this);